{#
    Financial statements categories.
#}
{% import _self as macro %}

{# Charts #}
<div>
    <div class="customGraph" id="total-revenue-pie"></div>
    <div class="customGraph" id="total-expenditures-pie"></div>
</div>

{% for categoryName, fields in financialStatements %}
    <div>
        {% set showTotalAndOver = (fields|first).otherfunds is defined %}

        {# Category caption. #}
        <div class="row">

            <div class="col-md-5"><b>{{ categoryName }}</b></div>

            {% if showTotalAndOver %}
                <div class="col-md-2 text-right"><b>General Fund</b></div>
                <div class="col-md-2 text-right"><b>Other Funds</b></div>
                <div class="col-md-2 text-right"><b>Total Gov. Funds</b></div>
            {% endif %}
        </div>

        {# Category fields. #}
        {% for name, data in fields %}
            <div class="row">
                <div class="col-md-5">{{ name }}</div>
                <div class="col-md-2 text-right">
                    {%- if not showTotalAndOver or loop.first -%}
                        <div class="pull-left currency-symbol">$&nbsp;</div>
                    {%- endif -%}
                    {{- macro.displayValue(data.genfund) -}}
                </div>

                {% if showTotalAndOver %}
                    <div class="col-md-2 text-right">
                        {%- if loop.first -%}
                            <div class="pull-left currency-symbol">$&nbsp;</div>
                        {%- endif -%}
                        {{- macro.displayValue(data.otherfunds) -}}
                    </div>
                    <div class="col-md-2 text-right">
                        {%- if loop.first -%}
                            <div class="pull-left currency-symbol">$&nbsp;</div>
                        {%- endif -%}
                        {{- macro.displayValue(data.totalfunds) -}}
                    </div>
                {% endif %}
            </div>
        {% endfor %}
        <br>
    </div>
{% endfor %}

{% macro displayValue(value) %}
    {% if value < 0 %}
        ({{ value|abs|number_format }})
    {% else %}
        {{ value |number_format}}
    {% endif %}
{% endmacro %}