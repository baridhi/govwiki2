{% extends "GovWikiFrontendBundle:Layout:main.html.twig" %}

{% set elected = electedOfficial %}
{# Main #}
{% block main %}

    {# Must be unique #}
    <section data-elected-name="{{elected.fullName}}" style="margin-top: 40px;">

        <div class="row person-info-header">
            <div class="col-md-10 col-md-push-1">
                <h5>ELECTED OFFICIALS - PROFILE</h5>
            </div>
        </div>

        <div class="row person-info-content">
            <div class="col-xs-12 col-sm-7 col-md-7 col-md-push-1 col-lg-7 col-lg-push-1" style="font-size:16px;">
                <p><strong>Example page</strong></p>
                <p>Title: {{elected.title}}</p>
                <p>Name: {{elected.fullName}} &nbsp;&nbsp;
                    <span class="disqus-comment-count vote" id="{{elected.id}}" data-disqus-identifier="{{elected.id}}">0</span>
                <p>Term expiries: {{elected.termExpires}}</p>
                {% if elected.bioUrl %}
                    <p><a target="_blank" href="{{elected.bioUrl}}">Biographical Highlights</a></p>
                {% endif %}
                <p>Email: <a href="mailto:{{elected.emailAddress}}">{{elected.emailAddress}}</a></p>
            </div>

            <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                <img src="{{elected.photoUrl}}"/>
            </div>
        </div>

        <hr/>

        <div class="row">
            <div class="col-xs-12">

                <!-- Nav tabs -->
                <select class="select-custom">
                    <option selected>Votes</option>
                    <option>Contributions</option>
                    <option>Endorsements</option>
                    <option>Public Statements</option>
                </select>


                {% for vote in votes %}
                    {% set blockId = 'voteCollapse' ~ loop.index %}
                    <div class="card">
                        <div class="card-header text-justify" data-toggle="collapse" data-target="#{{ blockId }}" aria-expanded="false" aria-controls="{{ blockId }}">
                            {{vote.legislation.name}}
                        </div>
                        <div class="card-sub-header">
                            <span class="date">{{vote.legislation.dateConsidered | date("m/d/Y") }}</span>
                            <span class="taxes">Taxes: {{ vote.legislation.govAssignedNumber }}</span>
                            <span class="comments">
                                <a href="#"><i class="glyphicon glyphicon-comment"></i> 0</a>
                            </span>
                        </div>
                        <div class="collapse" id="{{ blockId }}">
                            <div class="card-block">
                                <h4 class="card-title">{{vote.legislation.name}}</h4>
                                <p class="card-text">{{vote.legislation.summary}}</p>
                                <table class="table table-stripped">
                                    <tr>
                                        <th>How official voted</th>
                                        <td>{{vote.vote}}</td>
                                    </tr>
                                    <tr>
                                        <th>Did official sponsor?</th>
                                        <td>{{ vote.didElectedOfficialProposeThis ? 'Yes' : 'No' }}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                {% endfor %}

            </div>
        </div>

    </section>
{#<div class="card">#}
    {#<div class="card-header">#}
        {#<span>Vote</span>#}
        {#<a href="#" class="btn btn-primary btn-sm btn-custom">Comments (0)</a>#}
    {#</div>#}
    {#<div class="card-sub-header">#}
        {#<span class="date">04/24/2014</span>#}
        {#<span class="taxes">Taxes: #5355</span>#}
    {#</div>#}
    {#<div class="card-block">#}
        {#<h4 class="card-title">Disneyland Gate-Tax</h4>#}
        {#<p class="card-text">Aims to extend the expiring "gate-tax" ban, which if removed, would essentially tax Disneyland an extra $1 per person entering into the park.</p>#}
        {#<table class="table table-stripped">#}
            {#<tr>#}
                {#<th>How official voted</th>#}
                {#<td>Yes</td>#}
            {#</tr>#}
            {#<tr>#}
                {#<th>Did official sponsor?</th>#}
                {#<td>Yes</td>#}
            {#</tr>#}
        {#</table>#}
    {#</div>#}
{#</div>#}

    <!-- Disqus Modal -->
    {#{% include 'GovWikiFrontendBundle:Partial/Elected/Modals:disqus.html.twig' %}#}

    <!-- Facebook Comment Modal -->
    {% include 'GovWikiFrontendBundle:Partial/Elected/Modals:facebook_comment.html.twig' %}

    <!-- Votes Modal -->
    {% include 'GovWikiFrontendBundle:Partial/Elected/Modals:votes.html.twig' %}

    <!-- Contributions Modal -->
    {% include 'GovWikiFrontendBundle:Partial/Elected/Modals:contributions.html.twig' %}

    <!-- Endorsements Modal -->
    {% include 'GovWikiFrontendBundle:Partial/Elected/Modals:endorsements.html.twig' %}

    <!-- Public Statements Modal -->
    {% include 'GovWikiFrontendBundle:Partial/Elected/Modals:publicStatements.html.twig' %}

    {% verbatim %}
    <script id="row-addVotes" type="text//x-handlebars-template">
    <tr data-id style="background: rgba(80, 0, 0, 0.1)">
        <td data-date-considered="{{dateConsidered}}">
            {{dateConsidered}}
        </td>
        <td data-name="{{name}}" data-no-editable>
            {{name}}
        </td>
        <td data-summary="{{summary}}" data-no-editable>
            {{summary}}
        </td>
        <td data-vote="{{vote}}" data-no-editable>
            {{vote}}
        </td>
        <td align="center" data-did-elected-official-propose-this="{{#if did_elected_official_propose_this}}Yes{{else}}No{{/if}}" data-no-editable>
            {{#if did_elected_official_propose_this}}Yes{{else}}No{{/if}}
        </td>
        <td data-issue-category="{{category}}" data-no-editable>{{category}}</td>
        <td data-no-editable>{{username}}</td>
    </tr>
</script>

<script id="row-addContributions" type="text//x-handlebars-template">
    <tr data-id style="background: rgba(80, 0, 0, 0.1)">
        <td data-election-year="{{electionYear}}" data-no-editable>
            {{electionYear}}
        </td>
        <td data-contributor-name="{{contributorName}}" data-no-editable>
            {{contributorName}}
        </td>
        <td data-independent-expenditure-desc="{{independentExpenditureDesc}}" data-no-editable>
            {{independentExpenditureDesc}}
        </td>
        <td data-contribution-amount="{{contributionAmount}}" data-no-editable>
            {{contributionAmount}}
        </td>
        <td data-contributor-type="{{contributorType}}" data-no-editable=>
            {{contributorType}}
        </td>
        <td data-no-editable>{{username}}</td>
    </tr>
</script>

<script id="row-addEndorsements" type="text//x-handlebars-template">
    <tr data-id style="background: rgba(80, 0, 0, 0.1)">
        <td data-election-year="{{electionYear}}" data-no-editable>
            {{electionYear}}
        </td>
        <td data-name-of-endorser="{{nameOfEndorser}}" data-no-editable>
            {{nameOfEndorser}}
        </td>
        <td data-endorser-type="{{endorserType}}" data-no-editable>
            {{endorserType}}
        </td>
        <td data-no-editable>{{username}}</td>
    </tr>
</script>

<script id="row-addStatements" type="text//x-handlebars-template">
    <tr data-id style="background: rgba(80, 0, 0, 0.1)">
        <td data-date="{{date}}" data-no-editable>
            {{date}}
        </td>
        <td data-summary="{{summary}}" data-no-editable>
            {{summary}}
        </td>
        <td data-url="{{url}}" data-no-editable>
            {{url}}
        </td>
        <td data-url="{{category}}" data-no-editable="">
            {{category}}
        </td>
        <td data-no-editable>{{username}}</td>
    </tr>
</script>

    {% endverbatim %}

    {% if bottomText %}
        <div class="panel panel-danger notice">
            <div class="panel-body">
                {{ bottomText|raw }}
            </div>
        </div>
        <br>
    {% endif %}


{% endblock %}


{# Stylesheets #}
{% block stylesheets %}

    {{parent()}}

    <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet">

    {% stylesheets '@GovWikiFrontendBundle/Resources/public/css/elected.scss' filter='scss' %}
        <link rel="stylesheet" href="{{ asset_url }}">
    {% endstylesheets %}

{% endblock %}


{# Javascripts #}
{% block javascripts %}

    {{parent()}}

    <script>
        window.gw.electedOfficial = '{{ electedOfficialJSON | escape('js') }}';

        window.gw.urls = {};
        window.gw.urls.create_request = '{{ govwiki_path('govwiki_api_v1_createrequest_create') }}'
        window.gw.urls.edit_request = '{{ govwiki_path('govwiki_api_v1_editrequest_create') }}'
        window.gw.urls.check_url = '{{ govwiki_path('govwiki_api_v1_url_extract') }}'
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js"></script>
    <script id="dsq-embed-scr" src="//cpc-civicprofiles.disqus.com/embed.js"></script>
    <script id="dsq-count-scr" src="//cpc-civicprofiles.disqus.com/count.js"></script>

    {% javascripts  '@GovWikiFrontendBundle/Resources/public/js/vendor/handlebars.js'
                    '@GovWikiFrontendBundle/Resources/public/js/script.js'
                    '@GovWikiFrontendBundle/Resources/public/js/elected/handlers.js'
                    output='js/elected.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock %}
