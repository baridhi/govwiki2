<?php

namespace Application\Migrations;

use Doctrine\DBAL\Migrations\AbstractMigration;
use Doctrine\DBAL\Schema\Schema;

/**
 * Auto-generated Migration: Please modify to your needs!
 */
class Version20160111131014 extends AbstractMigration
{
    /**
     * @param Schema $schema
     */
    public function up(Schema $schema)
    {
        // this up() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        /*
         * Backup governments table.
         */
        $this->addSql('CREATE TABLE IF NOT EXISTS governments_old SELECT * FROM governments');
        $this->addSql('CREATE TABLE IF NOT EXISTS formats_old SELECT * FROM formats');

        $this->addSql('ALTER TABLE governments ADD county TINYINT(1) NOT NULL, DROP special_district_function_code, DROP population, DROP population_as_of_year, DROP enrollment, DROP enrollment_as_of_year, DROP frpm_rate, DROP fips_county, DROP fips_place, DROP median_wages_general_public, DROP median_benefits_general_public, DROP median_total_comp_general_public, DROP median_home_price, DROP median_salary_per_full_time_emp, DROP median_benefits_per_ft_emp, DROP median_total_comp_per_ft_emp, DROP median_total_comp_over_median_individual_comp, DROP name_of_highest_paid_employee, DROP title_of_highest_paid_employee, DROP total_comp_for_highest_paid_emp, DROP number_of_full_time_employees, DROP full_time_employees_over_population, DROP total_wages, DROP total_salaries_plus_benefits, DROP pension_contribution, DROP pension_uaal, DROP median_pension_30_year_retiree, DROP pension_contribution_over_total_revenue, DROP former_emp_with_largest_pension, DROP amount_of_largest_pension, DROP opeb_arc, DROP opeb_actual_contribution, DROP opeb_uaal, DROP opeb_arc_over_total_revenue, DROP pension_plus_opeb_arc_over_tot_rev, DROP academic_performance_index, DROP sat_scores, DROP parent_trigger_eligible_schools, DROP open_enrollment_schools, DROP violent_crimes_per_100000_population, DROP property_crimes_per_100000_population, DROP pavement_condition_index, DROP sales_tax_rate, DROP library_hours_per_week, DROP graduation_rate, DROP dropout_rate, DROP public_safety_exp_over_tot_gov_fund_revenue, DROP public_safety_exp_over_general_fund_revenue, DROP general_fund_balance_over_general_fund_exp, DROP total_debt_over_total_revenue, DROP default_probability, DROP total_governmental_fund_revenues, DROP total_revenue, DROP total_revenue_per_capita, DROP total_governmental_fund_expenditures, DROP total_expenditures, DROP total_expenditures_per_capita, DROP expenditure_per_student, DROP gf_surplus_over_gf_revenue, DROP change_in_governmental_fund_revenue, DROP wikipedia_page_exists, DROP transparent_california_page_name, DROP frpm_rate_rank, DROP median_salary_per_full_time_emp_rank, DROP median_benefits_per_ft_emp_rank, DROP median_total_comp_per_ft_emp_rank, DROP median_total_comp_over_median_individual_comp_rank, DROP total_comp_for_highest_paid_emp_rank, DROP full_time_employees_over_population_rank, DROP pension_contribution_over_total_revenue_rank, DROP opeb_arc_over_total_revenue_rank, DROP pension_plus_opeb_arc_over_tot_rev_rank, DROP violent_crimes_per_100000_population_rank, DROP property_crimes_per_100000_population_rank, DROP academic_performance_index_rank, DROP sat_scores_rank, DROP sales_tax_rate_rank, DROP library_hours_per_week_rank, DROP graduation_rate_rank, DROP dropout_rate_rank, DROP total_debt_over_total_revenue_rank, DROP expenditure_per_student_rank, DROP general_fund_balance_over_general_fund_exp_rank, DROP gf_surplus_over_gf_revenue_rank, DROP change_in_governmental_fund_revenue_rank, DROP default_probability_rank, DROP public_safety_exp_over_tot_gov_fund_revenue_rank, DROP public_safety_exp_over_general_fund_revenue_rank, DROP total_revenue_per_capita_rank, DROP total_expenditures_per_capita_rank, DROP median_total_comp_general_public_rank, DROP median_home_price_rank, DROP population_rank, DROP enrollment_rank, DROP sq_miles, DROP number_of_employees, DROP unemployment_rate, DROP current_assets, DROP current_liabilities, DROP long_term_debt, DROP total_assets, DROP total_net_position, DROP total_unrestricted_net_position, DROP general_revenues, DROP change_in_net_assets, DROP general_fund_revenues, DROP governmental_fund_expenditures, DROP general_fund_surplus, DROP net_change_in_general_fund_balance, DROP general_fund_balance, DROP debt_service_expenditures_all_funds, DROP intergovernmental_funds_gf, DROP government_funds_overall_balance, DROP net_change_in_fund_balance_over_general_fund_revenue, DROP net_change_in_fund_balance_over_general_fund_revenue_rank, DROP general_fund_balance_over_general_fund_expenditures, DROP general_fund_balance_over_general_fund_expenditures_rank, DROP current_assets_per_capita, DROP current_assets_per_capita_rank, DROP current_assets_over_current_liabilities, DROP current_assets_over_current_liabilities_rank, DROP long_term_debt_over_capita, DROP long_term_debt_over_capita_rank, DROP general_revenues_over_long_term_debt, DROP general_revenues_over_long_term_debt_rank, DROP debt_service_expenditures_over_general_fund_revenues, DROP debt_service_expenditures_over_general_fund_revenues_rank, DROP general_fund_surplus_over_revenues, DROP general_fund_surplus_over_revenues_rank, DROP change_in_net_assets_over_general_fund_revenues, DROP change_in_net_assets_over_general_fund_revenues_rank, DROP government_funds_overall_balance_per_capita, DROP government_funds_overall_balance_per_capita_rank, DROP overall_governmental_fund_balance_over_long_term_liabs, DROP overall_governmental_fund_balance_over_long_term_liabs_rank, DROP intergovermental_revenues_over_general_fund_revenues, DROP intergovermental_revenues_over_general_fund_revenues_rank, DROP total_unrestricted_net_position_over_total_assets, DROP total_unrestricted_net_position_over_total_assets_rank, DROP overall_weighted_index_rank, DROP legend_overall_ranking, DROP pavement_condition_index_rank');
        $this->addSql('ALTER TABLE formats ADD type VARCHAR(255) NOT NULL');
        $this->addSql('ALTER TABLE maps ADD alt_type VARCHAR(255) NOT NULL');
        $this->addSql('ALTER TABLE max_ranks ADD net_change_in_fund_balance_over_general_fund_revenue_rank INT DEFAULT NULL, ADD general_fund_balance_over_general_fund_expenditures_rank INT DEFAULT NULL, ADD current_assets_per_capita_rank INT DEFAULT NULL, ADD current_assets_over_current_liabilities_rank INT DEFAULT NULL, ADD long_term_debt_over_capita_rank INT DEFAULT NULL, ADD general_revenues_over_long_term_debt_rank INT DEFAULT NULL, ADD debt_service_expenditures_over_general_fund_revenues_rank INT DEFAULT NULL, ADD general_fund_surplus_over_revenues_rank INT DEFAULT NULL, ADD change_in_net_assets_over_general_fund_revenues_rank INT DEFAULT NULL, ADD government_funds_overall_balance_per_capita_rank INT DEFAULT NULL, ADD overall_governmental_fund_balance_over_long_term_liabs_rank INT DEFAULT NULL, ADD intergovermental_revenues_over_general_fund_revenues_rank INT DEFAULT NULL, ADD total_unrestricted_net_position_over_total_assets_rank INT DEFAULT NULL, ADD overall_weighted_index_rank INT DEFAULT NULL, ADD pavement_condition_index_rank INT DEFAULT NULL');
    }

    /**
     * @param Schema $schema
     */
    public function down(Schema $schema)
    {
        // this down() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('ALTER TABLE formats DROP type');
        $this->addSql('ALTER TABLE governments INT DEFAULT NULL, ADD special_district_function_code VARCHAR(255) DEFAULT NULL, ADD population DOUBLE PRECISION DEFAULT NULL, ADD population_as_of_year DOUBLE PRECISION DEFAULT NULL, ADD enrollment VARCHAR(50) DEFAULT NULL, ADD enrollment_as_of_year VARCHAR(50) DEFAULT NULL, ADD frpm_rate DOUBLE PRECISION DEFAULT NULL, ADD fips_county INT DEFAULT NULL, ADD fips_place INT DEFAULT NULL, ADD median_wages_general_public DOUBLE PRECISION DEFAULT NULL, ADD median_benefits_general_public DOUBLE PRECISION DEFAULT NULL, ADD median_total_comp_general_public DOUBLE PRECISION DEFAULT NULL, ADD median_home_price DOUBLE PRECISION DEFAULT NULL, ADD median_salary_per_full_time_emp DOUBLE PRECISION DEFAULT NULL, ADD median_benefits_per_ft_emp DOUBLE PRECISION DEFAULT NULL, ADD median_total_comp_per_ft_emp DOUBLE PRECISION DEFAULT NULL, ADD median_total_comp_over_median_individual_comp DOUBLE PRECISION DEFAULT NULL, ADD name_of_highest_paid_employee LONGTEXT DEFAULT NULL, ADD title_of_highest_paid_employee LONGTEXT DEFAULT NULL, ADD total_comp_for_highest_paid_emp DOUBLE PRECISION DEFAULT NULL, ADD number_of_full_time_employees DOUBLE PRECISION DEFAULT NULL, ADD full_time_employees_over_population DOUBLE PRECISION DEFAULT NULL, ADD total_wages DOUBLE PRECISION DEFAULT NULL, ADD total_salaries_plus_benefits DOUBLE PRECISION DEFAULT NULL, ADD pension_contribution DOUBLE PRECISION DEFAULT NULL, ADD pension_uaal DOUBLE PRECISION DEFAULT NULL, ADD median_pension_30_year_retiree DOUBLE PRECISION DEFAULT NULL, ADD pension_contribution_over_total_revenue DOUBLE PRECISION DEFAULT NULL, ADD former_emp_with_largest_pension LONGTEXT DEFAULT NULL, ADD amount_of_largest_pension DOUBLE PRECISION DEFAULT NULL, ADD opeb_arc DOUBLE PRECISION DEFAULT NULL, ADD opeb_actual_contribution DOUBLE PRECISION DEFAULT NULL, ADD opeb_uaal DOUBLE PRECISION DEFAULT NULL, ADD opeb_arc_over_total_revenue DOUBLE PRECISION DEFAULT NULL, ADD pension_plus_opeb_arc_over_tot_rev DOUBLE PRECISION DEFAULT NULL, ADD academic_performance_index DOUBLE PRECISION DEFAULT NULL, ADD sat_scores DOUBLE PRECISION DEFAULT NULL, ADD parent_trigger_eligible_schools LONGTEXT DEFAULT NULL, ADD open_enrollment_schools LONGTEXT DEFAULT NULL, ADD violent_crimes_per_100000_population DOUBLE PRECISION DEFAULT NULL, ADD property_crimes_per_100000_population DOUBLE PRECISION DEFAULT NULL, ADD pavement_condition_index DOUBLE PRECISION DEFAULT NULL, ADD sales_tax_rate DOUBLE PRECISION DEFAULT NULL, ADD library_hours_per_week DOUBLE PRECISION DEFAULT NULL, ADD graduation_rate DOUBLE PRECISION DEFAULT NULL, ADD dropout_rate DOUBLE PRECISION DEFAULT NULL, ADD public_safety_exp_over_tot_gov_fund_revenue DOUBLE PRECISION DEFAULT NULL, ADD public_safety_exp_over_general_fund_revenue DOUBLE PRECISION DEFAULT NULL, ADD general_fund_balance_over_general_fund_exp DOUBLE PRECISION DEFAULT NULL, ADD total_debt_over_total_revenue DOUBLE PRECISION DEFAULT NULL, ADD default_probability DOUBLE PRECISION DEFAULT NULL, ADD total_governmental_fund_revenues DOUBLE PRECISION DEFAULT NULL, ADD total_revenue DOUBLE PRECISION DEFAULT NULL, ADD total_revenue_per_capita DOUBLE PRECISION DEFAULT NULL, ADD total_governmental_fund_expenditures DOUBLE PRECISION DEFAULT NULL, ADD total_expenditures DOUBLE PRECISION DEFAULT NULL, ADD total_expenditures_per_capita DOUBLE PRECISION DEFAULT NULL, ADD expenditure_per_student DOUBLE PRECISION DEFAULT NULL, ADD gf_surplus_over_gf_revenue DOUBLE PRECISION DEFAULT NULL, ADD change_in_governmental_fund_revenue DOUBLE PRECISION DEFAULT NULL, ADD wikipedia_page_exists INT DEFAULT NULL, ADD transparent_california_page_name VARCHAR(255) DEFAULT NULL, ADD frpm_rate_rank INT DEFAULT NULL, ADD median_salary_per_full_time_emp_rank INT DEFAULT NULL, ADD median_benefits_per_ft_emp_rank INT DEFAULT NULL, ADD median_total_comp_per_ft_emp_rank INT DEFAULT NULL, ADD median_total_comp_over_median_individual_comp_rank INT DEFAULT NULL, ADD total_comp_for_highest_paid_emp_rank INT DEFAULT NULL, ADD full_time_employees_over_population_rank INT DEFAULT NULL, ADD pension_contribution_over_total_revenue_rank INT DEFAULT NULL, ADD opeb_arc_over_total_revenue_rank INT DEFAULT NULL, ADD pension_plus_opeb_arc_over_tot_rev_rank INT DEFAULT NULL, ADD violent_crimes_per_100000_population_rank INT DEFAULT NULL, ADD property_crimes_per_100000_population_rank INT DEFAULT NULL, ADD academic_performance_index_rank INT DEFAULT NULL, ADD sat_scores_rank INT DEFAULT NULL, ADD sales_tax_rate_rank INT DEFAULT NULL, ADD library_hours_per_week_rank INT DEFAULT NULL, ADD graduation_rate_rank INT DEFAULT NULL, ADD dropout_rate_rank INT DEFAULT NULL, ADD total_debt_over_total_revenue_rank INT DEFAULT NULL, ADD expenditure_per_student_rank INT DEFAULT NULL, ADD general_fund_balance_over_general_fund_exp_rank INT DEFAULT NULL, ADD gf_surplus_over_gf_revenue_rank INT DEFAULT NULL, ADD change_in_governmental_fund_revenue_rank INT DEFAULT NULL, ADD default_probability_rank INT DEFAULT NULL, ADD public_safety_exp_over_tot_gov_fund_revenue_rank INT DEFAULT NULL, ADD public_safety_exp_over_general_fund_revenue_rank INT DEFAULT NULL, ADD total_revenue_per_capita_rank INT DEFAULT NULL, ADD total_expenditures_per_capita_rank INT DEFAULT NULL, ADD median_total_comp_general_public_rank INT DEFAULT NULL, ADD median_home_price_rank INT DEFAULT NULL, ADD population_rank INT DEFAULT NULL, ADD enrollment_rank INT DEFAULT NULL, ADD sq_miles DOUBLE PRECISION DEFAULT NULL, ADD number_of_employees DOUBLE PRECISION DEFAULT NULL, ADD unemployment_rate DOUBLE PRECISION DEFAULT NULL, ADD current_assets DOUBLE PRECISION DEFAULT NULL, ADD current_liabilities DOUBLE PRECISION DEFAULT NULL, ADD long_term_debt DOUBLE PRECISION DEFAULT NULL, ADD total_assets DOUBLE PRECISION DEFAULT NULL, ADD total_net_position DOUBLE PRECISION DEFAULT NULL, ADD total_unrestricted_net_position DOUBLE PRECISION DEFAULT NULL, ADD general_revenues DOUBLE PRECISION DEFAULT NULL, ADD change_in_net_assets DOUBLE PRECISION DEFAULT NULL, ADD general_fund_revenues DOUBLE PRECISION DEFAULT NULL, ADD governmental_fund_expenditures DOUBLE PRECISION DEFAULT NULL, ADD general_fund_surplus DOUBLE PRECISION DEFAULT NULL, ADD net_change_in_general_fund_balance DOUBLE PRECISION DEFAULT NULL, ADD general_fund_balance DOUBLE PRECISION DEFAULT NULL, ADD debt_service_expenditures_all_funds DOUBLE PRECISION DEFAULT NULL, ADD intergovernmental_funds_gf DOUBLE PRECISION DEFAULT NULL, ADD government_funds_overall_balance DOUBLE PRECISION DEFAULT NULL, ADD net_change_in_fund_balance_over_general_fund_revenue DOUBLE PRECISION DEFAULT NULL, ADD net_change_in_fund_balance_over_general_fund_revenue_rank INT DEFAULT NULL, ADD general_fund_balance_over_general_fund_expenditures DOUBLE PRECISION DEFAULT NULL, ADD general_fund_balance_over_general_fund_expenditures_rank INT DEFAULT NULL, ADD current_assets_per_capita DOUBLE PRECISION DEFAULT NULL, ADD current_assets_per_capita_rank INT DEFAULT NULL, ADD current_assets_over_current_liabilities DOUBLE PRECISION DEFAULT NULL, ADD current_assets_over_current_liabilities_rank INT DEFAULT NULL, ADD long_term_debt_over_capita DOUBLE PRECISION DEFAULT NULL, ADD long_term_debt_over_capita_rank INT DEFAULT NULL, ADD general_revenues_over_long_term_debt DOUBLE PRECISION DEFAULT NULL, ADD general_revenues_over_long_term_debt_rank INT DEFAULT NULL, ADD debt_service_expenditures_over_general_fund_revenues DOUBLE PRECISION DEFAULT NULL, ADD debt_service_expenditures_over_general_fund_revenues_rank INT DEFAULT NULL, ADD general_fund_surplus_over_revenues DOUBLE PRECISION DEFAULT NULL, ADD general_fund_surplus_over_revenues_rank INT DEFAULT NULL, ADD change_in_net_assets_over_general_fund_revenues DOUBLE PRECISION DEFAULT NULL, ADD change_in_net_assets_over_general_fund_revenues_rank INT DEFAULT NULL, ADD government_funds_overall_balance_per_capita DOUBLE PRECISION DEFAULT NULL, ADD government_funds_overall_balance_per_capita_rank INT DEFAULT NULL, ADD overall_governmental_fund_balance_over_long_term_liabs DOUBLE PRECISION DEFAULT NULL, ADD overall_governmental_fund_balance_over_long_term_liabs_rank INT DEFAULT NULL, ADD intergovermental_revenues_over_general_fund_revenues DOUBLE PRECISION DEFAULT NULL, ADD intergovermental_revenues_over_general_fund_revenues_rank INT DEFAULT NULL, ADD total_unrestricted_net_position_over_total_assets DOUBLE PRECISION DEFAULT NULL, ADD total_unrestricted_net_position_over_total_assets_rank INT DEFAULT NULL, ADD overall_weighted_index_rank INT DEFAULT NULL, ADD legend_overall_ranking VARCHAR(10) DEFAULT NULL, ADD pavement_condition_index_rank INT DEFAULT NULL, DROP county');
        $this->addSql('ALTER TABLE maps DROP alt_type');
        $this->addSql('ALTER TABLE max_ranks DROP net_change_in_fund_balance_over_general_fund_revenue_rank, DROP general_fund_balance_over_general_fund_expenditures_rank, DROP current_assets_per_capita_rank, DROP current_assets_over_current_liabilities_rank, DROP long_term_debt_over_capita_rank, DROP general_revenues_over_long_term_debt_rank, DROP debt_service_expenditures_over_general_fund_revenues_rank, DROP general_fund_surplus_over_revenues_rank, DROP change_in_net_assets_over_general_fund_revenues_rank, DROP government_funds_overall_balance_per_capita_rank, DROP overall_governmental_fund_balance_over_long_term_liabs_rank, DROP intergovermental_revenues_over_general_fund_revenues_rank, DROP total_unrestricted_net_position_over_total_assets_rank, DROP overall_weighted_index_rank, DROP pavement_condition_index_rank');
    }
}
